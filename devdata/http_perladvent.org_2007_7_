<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Fri Dec  7 23:36:14 2007 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>2007 Perl Advent Calendar: Feliz Navidad, c. 2007</title>
<link rel="stylesheet" href="../style.css" type="text/css" /></head>
<body>
<h1><a href="../">Perl Advent Calendar 2007-12</a>-07</h1>
<h2 align="center">Feliz Navidad, c. 2007</h2>
<h3 align="center">by Josh McAdams</h3>

<body>

<blockquote style="padding: 1em; border: 2px ridge black; background-color:#eee">
Correction: An earlier version of this indicated that TimeDate subclassed DateTime, when it in fact predates it. The code also since been cleaned up by the management to fully take advantage of the distribution.
</blockquote>

<p>
Everyone knows that nothing is a timeless as a keepsake <tt>/stamped|engraved|mongrammed/</tt> with the date in which it was given.  This Christmas millions of people will be waiting in anticipation for that ornament or shirt tagged with 2007, knowing that they only have five or six days to show it off before it is officially considered 'so last year'.  After that, it becomes a relic of the past, hidden in a box or drawer waiting to be held long enough that it can tactfully be given to a second-hand store.
</p>

<p>
Aiming to please, Santa is prepared to label items with the Christmas date each year.  As easy as we may think it is to slap a 'December 25, 2007' on everything, we forget that Santa serves more than just an English speaking audience.  In order to label his gifts in the appropriate way for each country and language, Santa relies on the power of <tt>Date::Format</tt> and siblings <tt>Date::Language</tt> and <tt>Date::Parse</tt> from the <tt><a href="http://search.cpan.org/search?dist=TimeDate">TimeDate</a></tt> distribution, a crufty but lightweight alternative to some basic functions of DateTime. You can see Santa's complicity in the treadmill of planned obsolence below.
</p>

<h1><a href="mod7.pl">mod7.pl</a></h1>
<hr />
<pre>
   1 <span class="k">use</span> <span class="w">Date::Parse</span><span class="sc">;</span>
   2 <span class="k">use</span> <span class="w">Date::Language</span><span class="sc">;</span> <span class="c">#uses Date::Format;</span>
   3 
   4 <span class="c">#Equivalent but much faster, even when casting to epoch outside the loop</span>
   5 <span class="c">#my $xmas = DateTime-&gt;now-&gt;set( month =&gt; 12, day =&gt; 25 )-&gt;epoch;</span>
   6 <span class="k">my</span> <span class="i">$xmas</span> = <span class="i">str2time</span><span class="s">(</span><span class="q">'12/25'</span><span class="s">)</span><span class="sc">;</span>
   7 
   8 <span class="k">for</span> <span class="k">my</span> <span class="i">$language</span> <span class="s">(</span>
   9     <span class="q">qw(Austrian Czech Danish Dutch English Finnish</span>
  10     <span class="q">French German Greek Italian Norwegian Swedish)</span>
  11   <span class="s">)</span>
  12 <span class="s">{</span>
  13     <span class="k">my</span> <span class="i">$df</span> = <span class="w">Date::Language</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$language</span><span class="s">)</span><span class="sc">;</span>
  14     <span class="k">print</span> <span class="i">$df</span><span class="i">-&gt;time2str</span><span class="s">(</span> <span class="q">&quot;[$language] %e %B %Y\n&quot;</span><span class="cm">,</span> <span class="i">$xmas</span> <span class="s">)</span><span class="sc">;</span>
  15 <span class="s">}</span>
</pre>
</body>
</html>
